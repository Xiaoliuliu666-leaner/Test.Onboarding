<app-wizard-headbar></app-wizard-headbar>
<div class="wizard-layout">
  <app-wizard-sidebar 
    [menuList]="sidebarMenuList" 
    [activeMenu]="activeMenu"
    (menuClick)="onSidebarMenuClick($event)">
  </app-wizard-sidebar>
  <app-wizard-content-outline>
    <div class="module-card">
      <h2>User Management - Details</h2>
      <form (ngSubmit)="onNext()" style="width: 100%; max-width: 420px;">
        <div class="form-group">
          <label for="adminCount">How many admins?</label>
          <input id="adminCount" type="number" [(ngModel)]="detail.adminCount" name="adminCount" min="1" required />
        </div>
        <div class="form-group">
          <label for="notes">Notes:</label>
          <textarea id="notes" [(ngModel)]="detail.notes" name="notes" rows="3"></textarea>
        </div>
        <hr style="margin: 16px 0;">
        <div *ngFor="let role of roles">
          <h3>{{ role }}</h3>
          <div *ngFor="let user of usersByRole[role]; let i = index" class="user-row">
            <input [(ngModel)]="usersByRole[role][i].Name" placeholder="Name" name="{{role}}-name-{{i}}">
            <input [(ngModel)]="usersByRole[role][i].Email" placeholder="Email" name="{{role}}-email-{{i}}">
            <input [(ngModel)]="usersByRole[role][i].Phone" placeholder="Phone" name="{{role}}-phone-{{i}}">
            <button type="button" (click)="onRemoveUser(role, i)">Remove</button>
          </div>
          <button type="button" (click)="onAddUser(role)">Add {{ role }}</button>
          <hr>
        </div>
        <button type="button" class="prev-btn" (click)="onPrevious()">Previous</button>
        <button type="submit" class="next-btn">Next</button>
      </form>
    </div>
  </app-wizard-content-outline>
</div>