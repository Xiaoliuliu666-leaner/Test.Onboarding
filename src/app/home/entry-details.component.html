<div class="details-root">
  <h2>Entry Details</h2>
<div class="details-layout">
  <!-- 左侧 Left Tenant Info -->
  <section class="tenant-card">
    <h3>Tenant Info</h3>
    <div><b>Client Name:</b> {{entry.tenant.tenant === '__new__' ? entry.tenant.newTenantName : entry.tenant.tenant}}</div>
    <div><b>Contact Name:</b> {{entry.tenant.contactName}}</div>
    <div><b>Contact Email:</b> {{entry.tenant.contactEmail}}</div>
    <div><b>Contact Phone:</b> {{entry.tenant.contactPhone}}</div>
    <div><b>Created By:</b> {{entry.tenant.createdBy}}</div>
    <div><b>Notes:</b> {{entry.tenant.configNotes}}</div>
  </section>
  
  <!-- 右侧 Right Modules Section 区域 -->
  <section class="modules-area">
    <div class="modules-grid">
      <!-- Billing -->
      <div class="module-card" *ngIf="entry.modules['billing']">
        <h4>Billing</h4>
        <div><b>Billing Account:</b> {{entry.modules['billing'].billingAccount}}</div>
        <div><b>Notes:</b> {{entry.modules['billing'].billingNotes || 'none'}}</div>
      </div>
      <!-- User Management -->
      <div class="module-card" *ngIf="entry.modules['user-management']">
        <h4>User Management</h4>
        <div><b>Admin Count:</b> {{entry.modules['user-management'].detail?.adminCount}}</div>
        <div><b>Notes:</b> {{entry.modules['user-management'].detail?.notes}}</div>
        <div *ngIf="entry.modules['user-management'].usersByRole">
          <div><b>Organisation Admins:</b>
            <ul>
              <li *ngFor="let user of entry.modules['user-management'].usersByRole['Organisation Admins']">
                {{user.Name}} ({{user.Email}}, {{user.Phone}})
              </li>
            </ul>
          </div>
          <div><b>Brokers:</b>
            <ul>
              <li *ngFor="let user of entry.modules['user-management'].usersByRole['Brokers']">
                {{user.Name}} ({{user.Email}}, {{user.Phone}})
              </li>
            </ul>
          </div>
        </div>
      </div>
      <!-- Reporting -->
      <div class="module-card" *ngIf="entry.modules['reporting']">
        <h4>Reporting</h4>
        <div><b>Report Types:</b> {{entry.modules['reporting'].reportTypes}}</div>
        <div><b>Notes:</b> {{entry.modules['reporting'].reportingNotes}}</div>
        <div><b>Reports:</b>
          <ul>
            <li *ngFor="let r of entry.modules['reporting'].reports">{{r.name}} - {{r.description}}</li>
          </ul>
        </div>
      </div>
      <!-- Support -->
      <div class="module-card" *ngIf="entry.modules['support']">
        <h4>Support</h4>
        <div><b>Support Level:</b> {{entry.modules['support'].levelRequired}}</div>
        <div><b>Notes:</b> {{entry.modules['support'].supportNotes}}</div>
      </div>
      <!-- Workflows -->
      <div class="module-card" *ngIf="entry.modules['workflows']">
        <h4>Workflows</h4>
        <div *ngFor="let wf of entry.modules['workflows'].workflowRequirements; let i = index">
          <b>Workflow {{i + 1}}:</b> {{wf}}
        </div>
      </div>
      <!-- Integrations -->
      <div class="module-card" *ngIf="entry.modules['integrations']">
        <h4>Integrations</h4>
        <div *ngIf="entry.modules['integrations'].details?.winbeat">
          <b>WinBEAT:</b>
          <div><b>Hosting Provider:</b> {{entry.modules['integrations'].details.winbeat.hostingProvider}}</div>
          <div><b>Connection Info:</b> {{entry.modules['integrations'].details.winbeat.connectionInfo}}</div>
        </div>
        <div *ngIf="entry.modules['integrations'].details?.insight">
          <b>Insight:</b>
          <div><b>Ledger:</b> {{entry.modules['integrations'].details.insight.ledger}}</div>
          <div><b>Notes:</b> {{entry.modules['integrations'].details.insight.notes}}</div>
        </div>
        <div *ngIf="entry.modules['integrations'].details?.officetech">
          <b>Officetech:</b>
          <div><b>Hosting Provider:</b> {{entry.modules['integrations'].details.officetech.hostingProvider}}</div>
          <div><b>SQL Connection:</b> {{entry.modules['integrations'].details.officetech.sqlConnection}}</div>
          <div><b>File Storage:</b> {{entry.modules['integrations'].details.officetech.fileStorage}}</div>
        </div>
      </div>
    </div>
  </section>
</div>

<div class="actions">
  <button class="btn-primary" (click)="editEntry()">Edit</button>
  <button class="btn-secondary" (click)="goBack()">Back</button>
</div>