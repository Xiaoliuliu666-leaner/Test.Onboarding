<div class="home-portal-root">
  <div class="home-header-card">
    <h1>
      Welcome to <span class="brand">InsureTech.Onboarding</span>
    </h1>
    <a routerLink="/requirements/wizard" class="start-wizard-btn">
      <app-plus-icon></app-plus-icon>
      Start Requirements Wizard
    </a>
  </div>

  <div class="wizard-list-panel" *ngIf="wizardEntries && wizardEntries.length > 0">

    <!-- The title and search box are on the same line -->
    <div class="table-title-row" style="display:flex; align-items:center; justify-content:space-between; margin-bottom:14px;">
      <h2>Previously Created Entries</h2>
      <input type="text" [(ngModel)]="searchText" placeholder="Search..." class="table-search-input"/>
    </div>

    <table class="wizard-table">
      <thead>
        <tr>
          <th>Client Name</th>
          <th>Contact</th>
          <th *ngFor="let module of availableModules">{{ module.name }}</th>
          <th>Created By</th>
          <th>Notes</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let entry of filteredEntries; let i = index" (click)="viewDetails(i)" class="resumable-row">
          <td>
            {{ entry.tenant.tenant === '__new__' ? entry.tenant.newTenantName : entry.tenant.tenant }}
          </td>
          <td>
            <div>{{ entry.tenant.contactEmail }}</div>
            <div>{{ entry.tenant.contactPhone }}</div>
          </td>
          <td *ngFor="let module of availableModules" style="text-align: center;">
            <span *ngIf="entry.modules && entry.modules[module.key]">&#10004;</span>
          </td>
          <td>{{ entry.tenant.createdBy || 'Counter Clerk' }}</td>
          <td>{{ entry.tenant.configNotes || '-' }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>